#if defined(_WIN32) || defined(_WIN64)

/* 
 * =============================================================================
 *                            Windows: includes
 * =============================================================================
 */
#include "syslinks.h"
#include <windows.h>
#include <direct.h>
#include <intrin.h>

/* 
 * =============================================================================
 *                            Windows: path separator
 * =============================================================================
 */

uint8_t
path_sep() {
	return '\\';
}

/* 
 * =============================================================================
 *                            Windows: file exists
 * =============================================================================
 */

uint8_t
file_exists(const char* filename) {
    DWORD file_att = GetFileAttributes(filename);
    return file_att != INVALID_FILE_ATTRIBUTES && \
    	   !(file_att & FILE_ATTRIBUTE_DIRECTORY);
}

/* 
 * =============================================================================
 *                            Windows: create directory
 * =============================================================================
 */

uint8_t
create_dir(const char* dirname) {
	return _mkdir(dirname);
}

#else

/* 
 * =============================================================================
 *                            Unix/Apple: includes
 * =============================================================================
 */

#include "syslinks.h"
#include <unistd.h>
#include <sys/stat.h>

/* 
 * =============================================================================
 *                            Unix/Apple: path separator
 * =============================================================================
 */

uint8_t
path_sep() {
	return '/';
}

/* 
 * =============================================================================
 *                            Unix/Apple: file exists
 * =============================================================================
 */

uint8_t
file_exists(const char* filename) {
	return !access(filename, F_OK);
}

/* 
 * =============================================================================
 *                            Unix/Apple: create directory
 * =============================================================================
 */

uint8_t
create_dir(const char* dirname) {
	return !mkdir(dirname, 0777);
}

#endif
